# ê°ì²´ì—ì„œ ìœ ë‹ˆì–¸ íƒ€ì… ì¶”ì¶œí•˜ê¸°

[ì›ë¬¸](https://twitter.com/mpocock1/status/1497262298368409605?s=20&t=oez-3xavZMDYePJp5sVHEw)

ì•„ë˜ì™€ ê°™ì€ ê°ì²´ì—ì„œ ë©¤ë²„ë³„ ìœ ë‹ˆì–¸ íƒ€ì…ì„ ì–´ë–»ê²Œ ì¶”ì¶œí•  ìˆ˜ ìˆì„ê¹Œìš”?

```ts
export const fruitCounts = {
  apple: 1,
  pear: 4, 
  banana: 26
}
```
ìœ„ì™€ ê°™ì€ ê°ì²´ì—ì„œ ì•„ë˜ íƒ€ì…ì„ ì¶”ì¶œí•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```ts
type SingleFruitCount = 
  | {
    apple: number;
  }
  | {
    banana: number;
  }
  | {
    pear: number;
  }

// ìµœì¢… ëª©í‘œ
const singleFruitCount:SingleFruitCount = {
  banana: 12
}
```

ë¨¼ì € _íƒ€ì…_ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `fruitCounts`ì˜ íƒ€ì…ì„ ì„ ì–¸í•©ë‹ˆë‹¤.

```ts
type FruitCounts = typeof fruitCounts
```

`[K in keyof FruitCounts]`ë¥¼ ì‚¬ìš©í•´ì„œ ìš”ì†Œì˜ í‚¤ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. (ì°¸ê³ ë¡œ `keyof` ì•ì— `in`ì€ `for...in`ê³¼ ë¹„ìŠ·í•œ ì—­í• ì„ í•©ë‹ˆë‹¤ ğŸ˜€)
ê·¸ë¦¬ê³  ì¼ë‹¨ ê°ì²´ë¥¼ ì„ ì–¸í•´ì£¼ë©´ ì•„ë˜ì™€ ê°™ì€ íƒ€ì…ì´ ë©ë‹ˆë‹¤.

```ts
type NewSingleFruitCount = {
  [K in keyof FruitCounts] : {};
}

// ì•„ë˜ íƒ€ì…ê³¼ ë™ì¼í•©ë‹ˆë‹¤!
//
// type NewSingleFruitCount = {
//     apple: {};
//     pear: {};
//     banana: {};
// }

const singleFruitCounts:NewSingleFruitCount = {
  apple: {},
  banana: {},
  pear: {}
}
```

ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê±´ `apple: {}`ì´ ì•„ë‹Œ `apple: number`ì´ê¸° ë•Œë¬¸ì— ê°ì²´ ë‚´ë¶€ì— íƒ€ì…ì„ ì„ ì–¸í•©ë‹ˆë‹¤.

```ts
type NewSingleFruitCount = {
  [K in keyof FruitCounts] : {
    [K2 in K] : number
  };
}

// ì•„ë˜ íƒ€ì…ê³¼ ë™ì¼í•©ë‹ˆë‹¤!
//
// type NewSingleFruitCount = {
//     apple: {
//         apple: number;
//     };
//     pear: {
//         pear: number;
//     };
//     banana: {
//         banana: number;
//     };
// }

const singleFruitCounts:NewSingleFruitCount = {
  apple: {
    apple: 3
  },
  banana: {
    banana: 3
  },
  pear: {
    peer: 3
  }
}
```

`[K2 in K] : number`ë¡œ ë©¤ë²„ë³„ íƒ€ì…ì„ ì„ ì–¸í•©ë‹ˆë‹¤.

```ts
type NewSingleFruitCount = {
  [K in keyof FruitCounts] : {
    [K2 in K] : number
  };
}[keyof FruitCounts]

// ì•„ë˜ íƒ€ì…ê³¼ ë™ì¼í•©ë‹ˆë‹¤!
//
// type NewSingleFruitCount = {
//     apple: number;
// } | {
//     pear: number;
// } | {
//     banana: number;
// }

const singleFruitCounts:NewSingleFruitCount = {
  apple: 3
}
```

ë§ˆì§€ë§‰ keyê°’ìœ¼ë¡œ ì ‘ê·¼í•˜ê¸° ìœ„í•´ keyë“¤ì˜ ìœ ë‹ˆì–¸ íƒ€ì…ì¸ `[keyof FruitCounts]`ë¥¼ ë¶™ì—¬ì„œ ê° ë©¤ë²„ë“¤ì„ ìœ ë‹ˆì–¸ íƒ€ì…ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤.

[TypeScript Playground Example](https://www.typescriptlang.org/play?#code/KYDwDg9gTgLgBAYwgOwM7wGZQK4EsYDCE2yMqcAvHAN4BQccAhmGADbABccAjADT1wwwRlC4AWXnAEAjRsjmMuAJgBstAL61aMAJ5C4AZVzIA5uwBiOfERLwqAgD40BDZm05xk2ALbTgUAG4BTQYnOgYGWXl5Li9ffyCGELgwl0FhUU8fP0DgrQB6fMQUdDhUYzNgSzxCYlIOI1MLK1rbSmdCiKiFLm4lWk7NbT1gOGrrOrJ23SEIDDgsGptSci0Z0YA5YAB3Rsrx1tJ28LgAbQBpOGM4AGtgHTmxluWyAF04LhOGC6Ur5Dhzu9Ytl-MEgupTncHvMDi9UK8tEg0PByk0qs9JhwtrsKs0lpNjgI3OwOABmDS0IA)